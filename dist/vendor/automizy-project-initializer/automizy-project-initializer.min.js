window.AutomizyGlobalPlugins=window.AutomizyGlobalPlugins||{},window.AutomizyGlobalPluginsIndex=window.AutomizyGlobalPluginsIndex||0,window.AutomizyGlobalZIndex=window.AutomizyGlobalZIndex||2e3,window.AutomizyProject=function(a){var b=this;if(b.version=a.version||"0.1.1",b.name=a.name||false,b.elements=a.elements||{},b.dialogs=a.dialogs||{},b.inputs=a.inputs||{},b.buttons=a.buttons||{},b.forms=a.forms||{},b.functions=a.functions||{},b.events=a.events||{},b.modules=a.modules||{},b.xhr=a.xhr||{},b.permissions=a.permissions||{},b.permissionGroups=a.permissionGroups||{},b.config=a.config||{dir:".",url:"https://app.automizy.com",initFrom:""},b.m=a.m||{},b.d=a.d||{},b.initializer=a.initializer||{},"undefined"!==typeof a.variables)for(var c in a.variables)b[c]=a.variables[c];b.initializer.plugins=a.plugins||[],b.pluginLoader=new function(){var a=this;a.d={plugins:[],loadedPluginsCount:0,allPluginsCount:0,globalPluginsCount:0,loadedGlobalPluginsCount:0,completeFunctionReady:true,completeFunctions:[],pluginQueue:[]},a.addPlugin=function(a){return this.addPlugins([a])},a.plugins=a.addPlugins=function(a){var b=this;if("undefined"!==typeof a){for(var c=0;c<a.length;c++){var d=a[c];if(d.skipCondition=d.skipCondition||false,d.complete=d.complete||function(){},d.css=d.css||[],d.js=d.js||[],d.dir=d.dir||"",d.name=d.name||"automizy-plugin-"+ ++AutomizyGlobalPluginsIndex,d.windowVariable=d.windowVariable||false,d.requiredPlugins=d.requiredPlugins||[],"undefined"===typeof d.autoload)d.autoload=true;if("string"===typeof d.js)d.js=[d.js];if("string"===typeof d.css)d.css=[d.css];if("string"===typeof d.requiredPlugins)d.requiredPlugins=[d.requiredPlugins];if(""===d.dir&&d.js.length>0){var e=d.js[0];var f=e.lastIndexOf("/");if(f<=0)d.dir="";else d.dir=e.substring(0,f)}for(var g=0;g<d.js.length;g++)d.js[g]=d.js[g];for(var g=0;g<d.css.length;g++)d.css[g]=d.css[g];b.d.plugins.push(d)}return b}return b.d.plugins},a.pluginThen=function(a){var b=this;b.d.loadedPluginsCount++;for(var c=0;c<a.completeFunctions.length;c++)a.completeFunctions[c].apply(a,[true]),a.completed=true;if(console.log("%c "+a.name+" loaded ("+b.d.loadedPluginsCount+"/"+b.d.allPluginsCount+") ","background: #000000; color: #ffffff; font-size:12px; border-radius:0 12px 12px 0"),b.d.loadedPluginsCount===b.d.allPluginsCount&&b.d.globalPluginsCount===b.d.loadedGlobalPluginsCount&&b.d.completeFunctionReady)b.d.completeFunctionReady=false,b.complete();return b.iteratePluginQueue(),b},a.insertCss=function(a){var b=document.getElementsByTagName("head")[0];var c=document.createElement("link");return c.rel="stylesheet",c.type="text/css",c.href=a,b.appendChild(c),this},a.needToAddToPluginQueue=function(a){for(var b=0;b<a.requiredPlugins.length;b++)if(!AutomizyGlobalPlugins[a.requiredPlugins[b]].completed)return true;return false},a.addToPluginQueue=function(a){this.d.pluginQueue.push(a)},a.iteratePluginQueue=function(){var a=this;var b=false;for(var c=0;c<a.d.pluginQueue.length;c++){b=true;for(var d=0;d<a.d.pluginQueue[c].requiredPlugins.length;d++)if(!AutomizyGlobalPlugins[a.d.pluginQueue[c].requiredPlugins[d]].completed){b=false;break}if(b)a.startToLoadJSs(a.d.pluginQueue[c]),a.d.pluginQueue.splice(c,1)}return a},a.startToLoadJSs=function(a){var b=this;var c=[];console.log("%c "+a.name+" started to load ("+a.js.join(", ")+")","background: #000000; color: #ffffff; font-size:12px; border-radius:0 12px 12px 0");for(var d=0;d<a.js.length;d++)c.push($.getScript(a.js[d]).fail(function(){console.error("FAIL to load plugin with Automizy Project Initalizer");for(var a=0;a<arguments.length;a++)console.error(arguments[a])}));a.xhr=$.when.apply(null,c);for(var e=0;e<a.xhrAlwaysFunctions.length;e++)a.xhr.always(a.xhrAlwaysFunctions[e]);a.xhr.always(function(){b.pluginThen(a)})},a.parsePluginJSs=function(a){var b=this;if(b.needToAddToPluginQueue(a))return b.addToPluginQueue(a),this;return b.startToLoadJSs(a),this},a.run=function(){var a=this;var b=false;var c=[];a.d.allPluginsCount=0,a.d.loadedPluginsCount=0;var d=[];for(var e=0;e<a.d.plugins.length;e++){var f=a.d.plugins[e];if(!f.autoload)continue;if(f.inited)continue;if(f.inited=true,"undefined"===typeof AutomizyGlobalPlugins[f.name])AutomizyGlobalPlugins[f.name]={name:f.name,skipCondition:f.skipCondition,css:f.css,js:f.js,xhr:{always:function(a){this.xhrAlwaysFunctions.push(a)}},xhrAlwaysFunctions:[],requiredPlugins:f.requiredPlugins||[],completed:false,completeFunctions:[f.complete]},d.push(AutomizyGlobalPlugins[f.name]);else if(AutomizyGlobalPlugins[f.name].completeFunctions.push(f.complete),AutomizyGlobalPlugins[f.name].completed)f.complete.apply(f,[false]);else b=true,a.d.globalPluginsCount++,AutomizyGlobalPlugins[f.name].xhr.always.apply(AutomizyGlobalPlugins[f.name],[function(){if(a.d.loadedGlobalPluginsCount++,a.d.loadedPluginsCount===a.d.allPluginsCount&&a.d.globalPluginsCount===a.d.loadedGlobalPluginsCount&&a.d.completeFunctionReady)a.d.completeFunctionReady=false,a.complete()}])}for(var e=0;e<d.length;e++){var g=AutomizyGlobalPlugins[d[e].name];if("function"===typeof g.skipCondition)g.skipCondition=g.skipCondition.apply(this,[]);if(g.skipCondition){g.completed=true,g.completeFunctions[0].apply(g,[false]);continue}for(var h=0;h<g.css.length;h++)a.insertCss(g.css[h]);b=true,function(b){if(a.d.allPluginsCount++,b.js.length<=0)c.push(b);else a.parsePluginJSs(b)}(g)}for(var e=0;e<c.length;e++)a.pluginThen(c[e]);if(!b)a.complete();return a},a.complete=function(a){var b=this;if("function"===typeof a)return b.d.completeFunctionReady=true,b.d.completeFunctions.push({inited:false,func:a}),b;var c=b.d.completeFunctions.length;for(var d=0;d<c;d++){if(b.d.completeFunctions[d].inited)continue;b.d.completeFunctions[d].inited=true,b.d.completeFunctions[d].func.apply(b,[])}return b}},b.runTheFunctions=function(a,b,c){var a=a||[];var b=b||this;var c=c||[];for(var d=0;d<a.length;d++)a[d].apply(b,c)},b.functions.pluginsLoadedFunctions=[],b.pluginsLoaded=function(a){var b=this;if("function"===typeof a){if(b.functions.pluginsLoadedFunctions.push(a),b.automizyPluginsLoaded)a.apply(b,[]);return b}return b.runTheFunctions(b.functions.pluginsLoadedFunctions,b,[]),b.automizyPluginsLoaded=true,b},b.loadPlugins=function(){var a=this;if("undefined"===typeof window.jQuery){var b=document.createElement("SCRIPT");b.src=a.config.dir+"/vendor/jquery/jquery.min.js",b.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(b)}var c=function(a){if("function"===typeof window.jQuery)a(jQuery);else window.setTimeout(function(){c(a)},100)};c(function(b){if(a.initializer.plugins.length>0)a.pluginLoader.plugins(a.initializer.plugins).complete(function(){a.pluginsLoaded()}).run();else a.pluginsLoaded()})},b.init=function(){var a=this;if("undefined"===typeof a.automizyInited)a.automizyInited=false;if(!a.automizyInited)a.automizyInited=true,a.loadPlugins();return a},b.initFrom=function(a){var b=this;if("undefined"!==typeof a)return b.config.initFrom=a,b;return b.config.initFrom},b.baseDir=function(a){var b=this;if("undefined"!==typeof a)return b.config.dir=a,b;return b.config.dir},b.m.Event=function(a){var b=this;if(b.d={},b.d.functions=[],b.d.fireType=1,b.d.fireCount=0,b.d.arguments=[],"undefined"!==typeof a){if("undefined"!==typeof a.fireType)b.fireType(a.fireType);if("undefined"!==typeof a.fireCount)b.fireCount(a.fireCount);if("undefined"!==typeof a.functions)b.functions(a.functions);if("undefined"!==typeof a.arguments)b.arguments(a.arguments)}};var d=b.m.Event.prototype;d.functions=function(a){var b=this;if("undefined"!==typeof a)return b.d.functions=a,b;return b.d.functions},d.addFunction=function(a,b,c){var d=this;var e={fireCount:0,maxFireCount:c||false,name:b||false,function:a,enabled:true};if(d.d.functions.push(e),2===d.fireType()&&d.fireCount()>=1)d.fireFunction(e);return d},d.disableFunctions=function(a){return this.toggleFunctions(false,a||false)},d.enableFunctions=function(a){return this.toggleFunctions(true,a||false)},d.toggleFunctions=function(a,b){var c=this;if("undefined"===typeof b||false===b)return c.d.functions.forEach(function(b){b.enabled=a}),c;return c.d.functions.forEach(function(c){if(c.name===b)c.enabled=a}),c},d.arguments=function(arguments){var a=this;if("undefined"!==typeof arguments)return a.d.arguments=arguments,a;return a.d.arguments},d.addArgument=function(a){var b=this;return b.d.arguments.push(a),b},d.fireType=function(a){var b=this;if("undefined"!==typeof a)return b.d.fireType=a,b;return b.d.fireType},d.fireCount=function(a){var b=this;if("undefined"!==typeof a)return b.d.fireCount=a,b;return b.d.fireCount},d.fire=function(){var a=this;return a.d.functions.forEach(function(b){a.fireFunction(b)}),a.d.fireCount++,a},d.fireFunction=function(a){var b=this;if(!a.enabled)return b;if(false!==a.maxFireCount){if(a.fireCount<a.maxFireCount)a.fireCount++,a.function.apply(b,b.arguments())}else a.fireCount++,a.function.apply(b,b.arguments());return b},b.functions.readyFunctions=[],b.ready=function(a){var b=this;if("function"===typeof a){if(b.functions.readyFunctions.push(a),b.automizyReady)a.apply(b,[]);return b}return b.runTheFunctions(b.functions.readyFunctions),b.automizyReady=true,b},b.functions.layoutReadyFunctions=[],b.layoutReady=function(a){var b=this;if("function"===typeof a){if(b.functions.layoutReadyFunctions.push(a),b.automizyLayoutReady)a.apply(b,[]);return b}return b.runTheFunctions(b.functions.layoutReadyFunctions),b.automizyLayoutReady=true,b},b.id=function(a){if("undefined"!==typeof a)return this.d.id=a,this;return this.d.id},b.functions.permissionChangeFunctions=[],b.functions.permissionChangeFunctionsByKey={},b.permissionChange=function(a,c){var d=this;if("function"===typeof a&&"undefined"===typeof c)return d.functions.permissionChangeFunctions.push(a),d;if("function"===typeof a&&"undefined"!==typeof c){if("undefined"===typeof d.functions.permissionChangeFunctionsByKey[c])d.functions.permissionChangeFunctionsByKey[c]=[];return d.functions.permissionChangeFunctionsByKey[c].push(a),d}b.runTheFunctions(b.functions.permissionChangeFunctions);for(var e in b.permissions)b.runTheFunctions(b.functions.permissionChangeFunctionsByKey[e]||[],b,[b.permissions[e],b.permissions[e]]);return d},b.permission=function(){if("undefined"===typeof arguments[0])return b.permissions;if("object"!==typeof arguments[0]&&"undefined"===typeof arguments[1])return b.permissions[arguments[0]]||false;if("object"!==typeof arguments[0]&&"undefined"!==typeof arguments[1])return b.runTheFunctions(b.functions.permissionChangeFunctions,b,[arguments[0],arguments[1],b.permissions[arguments[0]]]),b.runTheFunctions(b.functions.permissionChangeFunctionsByKey[arguments[0]]||[],b,[arguments[1],b.permissions[arguments[0]]]),b.permissions[arguments[0]]=arguments[1],b;if("object"===typeof arguments[0]&&"undefined"===typeof arguments[1]){for(var a in arguments[0])b.runTheFunctions(b.functions.permissionChangeFunctions,b,[a,arguments[0][a],b.permissions[a]]),b.runTheFunctions(b.functions.permissionChangeFunctionsByKey[a]||[],b,[arguments[0][a],b.permissions[a]]),b.permissions[a]=arguments[0][a];return b}return b},b.createEvent=function(a){if("string"===typeof(a=a||{}))a={eventName:a};return b.events[a.eventName]=new b.m.Event({fireType:a.fireType||1,arguments:a.arguments||[]}),b[a.eventName]=function(c,d,e){if("function"===typeof c)return b.events[a.eventName].addFunction(c,d||false,e||false),b;else if("string"===typeof c)if("off"===c)return b.events[a.eventName].disableFunctions(d||false),b;else if("on"===c&&"string"===typeof d)return b.events[a.eventName].enableFunctions(d),b;if("object"===typeof c||"array"===typeof c)b.events[a.eventName].arguments(c);return b.events[a.eventName].fire(),b},b},b.loadPlugin=function(a,c,d){c=c||function(){},d=d||false;var e=false;for(var f=0;f<b.initializer.plugins.length;f++)if(b.initializer.plugins[f].name===a){e=b.initializer.plugins[f];break}if(false===e)return false;if(d)$A.ajaxDocumentCover(1);return b.pluginLoader.addPlugin({name:a,skipCondition:e.skipCondition||false,js:e.js||[],css:e.css||[],autoload:true,complete:function(){if("undefined"!==typeof e.windowVariable&&false!==e.windowVariable)window[e.windowVariable].init().ready(function(){if(d)$A.ajaxDocumentCover(0);if("function"===typeof e.complete)e.complete.apply(this,[]);c.apply(this,[])});else{if(d)$A.ajaxDocumentCover(0);if("function"===typeof e.complete)e.complete.apply(this,[]);c.apply(this,[])}}}).run()},console.log("%c "+(b.name||"A module")+" was created by AutomizyProjectInitializer! ","background: #000000; color: #f7ffde; font-size:14px; border-radius:0 12px 12px 0")};
//# sourceMappingURL=automizy-project-initializer.min.map